import type { NextPage } from 'next'
import Head from 'next/head'
import Image from 'next/image'
import Chart from '/public/images/chart.png'

import NavBar from 'src/components/NavBar'
import SearchBar from 'src/components/SearchBar'
import DescribeText from 'src/components/DescribeText'

import { SloganContainer } from 'styles/mainStyles/IndexStyle'
import IntroductionSearchBar from 'src/components/IntroductionSearchBar'
import { LightSection } from 'styles/mainStyles/LightSectionStyle'
import { IntroductionVideoContainer, IntroductionDivAnimation1, IntroductionDivAnimation2 } from 'styles/mainStyles/IntroductionVideoStyle'
import { Spinner } from 'styles/componentStyles/SpinnerStyle'
import { ImgFrameContainer } from 'styles/mainStyles/ImgFrameStyle'

import { gsap } from 'gsap'
import { ScrollTrigger } from 'gsap/dist/ScrollTrigger';

import { useRef, useEffect } from 'react'

export const HOME_URL = process.env.NEXT_PUBLIC_API_URL;

const Home: NextPage = () => {  


  const DivAnimationRef1 = useRef(null)
  const DivAnimationRef2 = useRef(null)
  useEffect(() => {
    const el1 = DivAnimationRef1.current;
    const el2 = DivAnimationRef2.current;
    gsap.registerPlugin(ScrollTrigger);
    gsap.to(el1, {
      scrollTrigger: {
        trigger: "#SloganContainer",
        // 화면에 marker를 띄워 animation 위치 확인가능
        // markers: true, 
        start: "top top",
        end: "+=800",
        scrub: true,
        // pin: true,
      },
      x: -300, duration: 2
      });
    gsap.to(el2, {
      scrollTrigger: {
        trigger: "#SloganContainer",
        // 화면에 marker를 띄워 animation 위치 확인가능
        // markers: true, 
        start: "top top",
        end: "+=800",
        scrub: true,
        // pin: true,
      },
      x: 300, duration: 2
      });
    gsap.to("#ImgFrameContainer", {
      opacity: 0,
      ease: "none",
      // scrollTrigger: {
      //   trigger: '#SloganContainer',
      //   markers:true,
      //   start: "top top",
      //   end: "+=800",
      //   scrub: true,
      // },
      });
    gsap.to("#ImgFrameContainer", {
      // autoAlpha: 1,
      ease: "none",
      // duration:20000,
      opacity: 1,
      scrollTrigger: {
        trigger: '#ImgFrameStart',
        markers:true,
        start: "top top",
        end: "bottom center",
        scrub: true,
      },
      });

      }, [])
      const aaa= ()=>{
        console.log("함수 실행됨")
        
      }
  return (
    
    <>
      <Head>
        <title>민심</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>

      <main>
        <NavBar />
        
        <section>
          <SloganContainer id='SloganContainer'>
            <h4>
              서비스 슬로건 및 비전뭐 그런거랑 간략한 설명 및 캐치프레이즈<br/>대통령은 국민의 보통·평등·직접·비밀선거에 의하여 선출한다. 
            </h4>
          </SloganContainer>
        </section>
        <section>
          <DescribeText
            mainText='채널 정보' 
            subText1='채널을 검색해보세요.'
            subText2='다양한 정보가 당신을 기다리고 있습니다.'/>
          <IntroductionSearchBar/>
          <IntroductionVideoContainer id='IntroductionVideoContainer'>
            <IntroductionDivAnimation1 id='IntroductionDivAnimation1' ref={DivAnimationRef1}/>
            <IntroductionDivAnimation2 id='IntroductionDivAnimation2' ref={DivAnimationRef2}/>
          </IntroductionVideoContainer>
          <Spinner />
        </section>
        <section id="ImgFrameStart">
          <DescribeText
            mainText='민심 확인' 
            subText1='채널을 검색해보세요.'
            subText2='다양한 정보가 당신을 기다리고 있습니다.'/>
          <ImgFrameContainer id="ImgFrameContainer">
            <Image id="chartimg" src={Chart} alt="배경 차트"/>
          </ImgFrameContainer>
        </section>
        <section>
          <DescribeText 
            mainText='트렌드 서칭' 
            subText1='채널을 검색해보세요.'
            subText2='다양한 정보가 당신을 기다리고 있습니다.'/>
          <IntroductionVideoContainer />
        </section>
      </main>
    </>
  )
}

export default Home
